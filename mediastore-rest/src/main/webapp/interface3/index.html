<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
	<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Comparator</title>
	<link rel="stylesheet" type="text/css" href="style.css"/>
        <script type="text/javascript" src="js/jquery-1.10.1.js"></script>
	<script type="text/javascript" src="js/jquery.plugin-Comparator.js"></script>
        <script type="text/javascript" src="js/mustache.js"></script>
</head>
<body>
	
	<div id="top">
		<h1><b>C</b>omparateur d'images</h1>
		<div id="menu"><b>C</b>omparez vos images !</div>
	</div>
	
	<div id="body">
		
		<div id="left_div">
			
			<table>
				<caption>Galerie choisie</caption>
                                <tr><td><div id="source" class="wrapper" style="height:200px"></div></td></tr>
			</table>
			
			<br/><br/>
			
                        <ul id="nav" class="navigation">
				<li id="li_selected" class="album">
                                    Galerie sélectionnée:
                                            <div>
                                            <form id="sourceForm">
                                                <input id="InputSource" type="text" name="sourceInput" placeholder="Chemin, nom, extension..."></input>
                                                <input type="submit" name="submit" value="load"></input>
                                            </form>
                                             </div>
                                </li>
                                 <li>
                                    Galerie comparée: 
                                            <form id="targetForm">
                                                <input id="InputCible" type="text" name="sourceCible" placeholder="Chemin, nom, extension.."></input>
                                                <input type="submit" name="submit" value="load"></input>   
                                            </form>
				</li>
                            </ul>
			
		</div>
		
		<div id="right_div">
                    <table>
				<caption>Galerie comparée</caption>
                                <tr><td><div id="cible"class="wrapper"> <!--style="height:200px"--></div></td></tr>
			</table>
                    <!--<table><tr><td><div id="cible2" class="wrapper"></div></td></tr></table>-->
		
		</div>
		
	</div>
<script>
	$(function(){
             	//initialisation du plugin
                configureGalleryComparator("/rest/hello/findSimilarByPath","/rest/hello/findGallery","/rest/hello/directories",$("#cible"));
                //lien entre les composants d'affichage et le plugin
             	$('#sourceForm').submit(function(){
			$("#source").displaySelectedGallery({"galleryToLoad":$("#InputSource").val()});  
                    return false;
                });
                 $('#targetForm').submit(function(){
                     //indiquation au plugin de l'élément contenant le nom de la galerie à comparer
                     loadGalleryToCompare($("#InputCible").val());
                     $("#cible").displaySelectedGallery({"galleryToLoad":$("#InputCible").val()});    
                    return false;
                 });      
                 //les "return false" servent uniquement à empêcher le rechargement de la page.
	});
</script>
</body>
</html>